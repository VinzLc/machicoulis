{"ast":null,"code":"'use strict';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getProperties = void 0;\nconst utils_1 = require(\"@aws-amplify/core/internals/utils\");\nconst utils_2 = require(\"../../utils\");\nconst s3data_1 = require(\"../../utils/client/s3data\");\nconst userAgent_1 = require(\"../../utils/userAgent\");\nconst utils_3 = require(\"../../../../utils\");\nconst constants_1 = require(\"../../utils/constants\");\nconst getProperties = async (amplify, input, action) => {\n  const {\n    s3Config,\n    bucket,\n    keyPrefix,\n    identityId\n  } = await (0, utils_2.resolveS3ConfigAndInput)(amplify, input);\n  const {\n    inputType,\n    objectKey\n  } = (0, utils_2.validateStorageOperationInput)(input, identityId);\n  (0, utils_2.validateBucketOwnerID)(input.options?.expectedBucketOwner);\n  const finalKey = inputType === constants_1.STORAGE_INPUT_KEY ? keyPrefix + objectKey : objectKey;\n  utils_3.logger.debug(`get properties of ${objectKey} from ${finalKey}`);\n  const response = await (0, s3data_1.headObject)({\n    ...s3Config,\n    userAgentValue: (0, userAgent_1.getStorageUserAgentValue)(action ?? utils_1.StorageAction.GetProperties)\n  }, {\n    Bucket: bucket,\n    Key: finalKey,\n    ExpectedBucketOwner: input.options?.expectedBucketOwner\n  });\n  const result = {\n    contentType: response.ContentType,\n    size: response.ContentLength,\n    eTag: response.ETag,\n    lastModified: response.LastModified,\n    metadata: response.Metadata,\n    versionId: response.VersionId\n  };\n  return inputType === constants_1.STORAGE_INPUT_KEY ? {\n    key: objectKey,\n    ...result\n  } : {\n    path: objectKey,\n    ...result\n  };\n};\nexports.getProperties = getProperties;","map":{"version":3,"names":["Object","defineProperty","exports","value","getProperties","utils_1","require","utils_2","s3data_1","userAgent_1","utils_3","constants_1","amplify","input","action","s3Config","bucket","keyPrefix","identityId","resolveS3ConfigAndInput","inputType","objectKey","validateStorageOperationInput","validateBucketOwnerID","options","expectedBucketOwner","finalKey","STORAGE_INPUT_KEY","logger","debug","response","headObject","userAgentValue","getStorageUserAgentValue","StorageAction","GetProperties","Bucket","Key","ExpectedBucketOwner","result","contentType","ContentType","size","ContentLength","eTag","ETag","lastModified","LastModified","metadata","Metadata","versionId","VersionId","key","path"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\storage\\src\\providers\\s3\\apis\\internal\\getProperties.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getProperties = void 0;\nconst utils_1 = require(\"@aws-amplify/core/internals/utils\");\nconst utils_2 = require(\"../../utils\");\nconst s3data_1 = require(\"../../utils/client/s3data\");\nconst userAgent_1 = require(\"../../utils/userAgent\");\nconst utils_3 = require(\"../../../../utils\");\nconst constants_1 = require(\"../../utils/constants\");\nconst getProperties = async (amplify, input, action) => {\n    const { s3Config, bucket, keyPrefix, identityId } = await (0, utils_2.resolveS3ConfigAndInput)(amplify, input);\n    const { inputType, objectKey } = (0, utils_2.validateStorageOperationInput)(input, identityId);\n    (0, utils_2.validateBucketOwnerID)(input.options?.expectedBucketOwner);\n    const finalKey = inputType === constants_1.STORAGE_INPUT_KEY ? keyPrefix + objectKey : objectKey;\n    utils_3.logger.debug(`get properties of ${objectKey} from ${finalKey}`);\n    const response = await (0, s3data_1.headObject)({\n        ...s3Config,\n        userAgentValue: (0, userAgent_1.getStorageUserAgentValue)(action ?? utils_1.StorageAction.GetProperties),\n    }, {\n        Bucket: bucket,\n        Key: finalKey,\n        ExpectedBucketOwner: input.options?.expectedBucketOwner,\n    });\n    const result = {\n        contentType: response.ContentType,\n        size: response.ContentLength,\n        eTag: response.ETag,\n        lastModified: response.LastModified,\n        metadata: response.Metadata,\n        versionId: response.VersionId,\n    };\n    return inputType === constants_1.STORAGE_INPUT_KEY\n        ? { key: objectKey, ...result }\n        : { path: objectKey, ...result };\n};\nexports.getProperties = getProperties;\n"],"mappings":";;AACA;AACA;AACAA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAI,CAAE,CAAC;AAC7DD,OAAO,CAACE,aAAa,GAAG,MAAM;AAC9B,MAAMC,OAAO,GAAGC,OAAO,CAAC,mCAAmC,CAAC;AAC5D,MAAMC,OAAO,GAAGD,OAAO,CAAC,aAAa,CAAC;AACtC,MAAME,QAAQ,GAAGF,OAAO,CAAC,2BAA2B,CAAC;AACrD,MAAMG,WAAW,GAAGH,OAAO,CAAC,uBAAuB,CAAC;AACpD,MAAMI,OAAO,GAAGJ,OAAO,CAAC,mBAAmB,CAAC;AAC5C,MAAMK,WAAW,GAAGL,OAAO,CAAC,uBAAuB,CAAC;AACpD,MAAMF,aAAa,GAAG,MAAAA,CAAOQ,OAAO,EAAEC,KAAK,EAAEC,MAAM,KAAK;EACpD,MAAM;IAAEC,QAAQ;IAAEC,MAAM;IAAEC,SAAS;IAAEC;EAAU,CAAE,GAAG,MAAM,IAAIX,OAAO,CAACY,uBAAuB,EAAEP,OAAO,EAAEC,KAAK,CAAC;EAC9G,MAAM;IAAEO,SAAS;IAAEC;EAAS,CAAE,GAAG,IAAId,OAAO,CAACe,6BAA6B,EAAET,KAAK,EAAEK,UAAU,CAAC;EAC9F,IAAIX,OAAO,CAACgB,qBAAqB,EAAEV,KAAK,CAACW,OAAO,EAAEC,mBAAmB,CAAC;EACtE,MAAMC,QAAQ,GAAGN,SAAS,KAAKT,WAAW,CAACgB,iBAAiB,GAAGV,SAAS,GAAGI,SAAS,GAAGA,SAAS;EAChGX,OAAO,CAACkB,MAAM,CAACC,KAAK,CAAC,qBAAqBR,SAAS,SAASK,QAAQ,EAAE,CAAC;EACvE,MAAMI,QAAQ,GAAG,MAAM,IAAItB,QAAQ,CAACuB,UAAU,EAAE;IAC5C,GAAGhB,QAAQ;IACXiB,cAAc,EAAE,IAAIvB,WAAW,CAACwB,wBAAwB,EAAEnB,MAAM,IAAIT,OAAO,CAAC6B,aAAa,CAACC,aAAa;EAC/G,CAAK,EAAE;IACCC,MAAM,EAAEpB,MAAM;IACdqB,GAAG,EAAEX,QAAQ;IACbY,mBAAmB,EAAEzB,KAAK,CAACW,OAAO,EAAEC;EAC5C,CAAK,CAAC;EACF,MAAMc,MAAM,GAAG;IACXC,WAAW,EAAEV,QAAQ,CAACW,WAAW;IACjCC,IAAI,EAAEZ,QAAQ,CAACa,aAAa;IAC5BC,IAAI,EAAEd,QAAQ,CAACe,IAAI;IACnBC,YAAY,EAAEhB,QAAQ,CAACiB,YAAY;IACnCC,QAAQ,EAAElB,QAAQ,CAACmB,QAAQ;IAC3BC,SAAS,EAAEpB,QAAQ,CAACqB;EAC5B,CAAK;EACD,OAAO/B,SAAS,KAAKT,WAAW,CAACgB,iBAAA,GAC3B;IAAEyB,GAAG,EAAE/B,SAAS;IAAE,GAAGkB;EAAM,IAC3B;IAAEc,IAAI,EAAEhC,SAAS;IAAE,GAAGkB;EAAM,CAAE;AACxC,CAAC;AACDrC,OAAO,CAACE,aAAa,GAAGA,aAAa","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}