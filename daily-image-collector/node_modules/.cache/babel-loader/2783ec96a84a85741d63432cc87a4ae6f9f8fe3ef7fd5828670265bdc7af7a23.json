{"ast":null,"code":"'use strict';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SessionListener = void 0;\nconst isBrowser_1 = require(\"../isBrowser\");\nconst stateChangeListeners = new Set();\nclass SessionListener {\n  constructor() {\n    this.listenerActive = false;\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n    // Setup state listeners\n    if ((0, isBrowser_1.isBrowser)()) {\n      document.addEventListener('visibilitychange', this.handleVisibilityChange, false);\n      this.listenerActive = true;\n    }\n  }\n  addStateChangeListener(listener, notifyOnAdd = false) {\n    // No-op if document listener is not active\n    if (!this.listenerActive) {\n      return;\n    }\n    stateChangeListeners.add(listener);\n    // Notify new handlers of the current status on add\n    if (notifyOnAdd) {\n      listener(this.getSessionState());\n    }\n  }\n  removeStateChangeListener(handler) {\n    // No-op if document listener is not active\n    if (!this.listenerActive) {\n      return;\n    }\n    stateChangeListeners.delete(handler);\n  }\n  handleVisibilityChange() {\n    this.notifyHandlers();\n  }\n  notifyHandlers() {\n    const sessionState = this.getSessionState();\n    stateChangeListeners.forEach(listener => {\n      listener(sessionState);\n    });\n  }\n  getSessionState() {\n    if ((0, isBrowser_1.isBrowser)() && document.visibilityState !== 'hidden') {\n      return 'started';\n    }\n    // If, for any reason, document is undefined the session will never start\n    return 'ended';\n  }\n}\nexports.SessionListener = SessionListener;","map":{"version":3,"names":["Object","defineProperty","exports","value","SessionListener","isBrowser_1","require","stateChangeListeners","Set","constructor","listenerActive","handleVisibilityChange","bind","isBrowser","document","addEventListener","addStateChangeListener","listener","notifyOnAdd","add","getSessionState","removeStateChangeListener","handler","delete","notifyHandlers","sessionState","forEach","visibilityState"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\core\\src\\utils\\sessionListener\\SessionListener.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionListener = void 0;\nconst isBrowser_1 = require(\"../isBrowser\");\nconst stateChangeListeners = new Set();\nclass SessionListener {\n    constructor() {\n        this.listenerActive = false;\n        this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n        // Setup state listeners\n        if ((0, isBrowser_1.isBrowser)()) {\n            document.addEventListener('visibilitychange', this.handleVisibilityChange, false);\n            this.listenerActive = true;\n        }\n    }\n    addStateChangeListener(listener, notifyOnAdd = false) {\n        // No-op if document listener is not active\n        if (!this.listenerActive) {\n            return;\n        }\n        stateChangeListeners.add(listener);\n        // Notify new handlers of the current status on add\n        if (notifyOnAdd) {\n            listener(this.getSessionState());\n        }\n    }\n    removeStateChangeListener(handler) {\n        // No-op if document listener is not active\n        if (!this.listenerActive) {\n            return;\n        }\n        stateChangeListeners.delete(handler);\n    }\n    handleVisibilityChange() {\n        this.notifyHandlers();\n    }\n    notifyHandlers() {\n        const sessionState = this.getSessionState();\n        stateChangeListeners.forEach(listener => {\n            listener(sessionState);\n        });\n    }\n    getSessionState() {\n        if ((0, isBrowser_1.isBrowser)() && document.visibilityState !== 'hidden') {\n            return 'started';\n        }\n        // If, for any reason, document is undefined the session will never start\n        return 'ended';\n    }\n}\nexports.SessionListener = SessionListener;\n"],"mappings":";;AACA;AACA;AACAA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAI,CAAE,CAAC;AAC7DD,OAAO,CAACE,eAAe,GAAG,MAAM;AAChC,MAAMC,WAAW,GAAGC,OAAO,CAAC,cAAc,CAAC;AAC3C,MAAMC,oBAAoB,GAAG,IAAIC,GAAG,EAAE;AACtC,MAAMJ,eAAe,CAAC;EAClBK,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACC,sBAAsB,GAAG,IAAI,CAACA,sBAAsB,CAACC,IAAI,CAAC,IAAI,CAAC;IAC5E;IACQ,IAAI,IAAIP,WAAW,CAACQ,SAAS,GAAG,EAAE;MAC9BC,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAACJ,sBAAsB,EAAE,KAAK,CAAC;MACjF,IAAI,CAACD,cAAc,GAAG,IAAI;IACtC;EACA;EACIM,sBAAsBA,CAACC,QAAQ,EAAEC,WAAW,GAAG,KAAK,EAAE;IAC1D;IACQ,IAAI,CAAC,IAAI,CAACR,cAAc,EAAE;MACtB;IACZ;IACQH,oBAAoB,CAACY,GAAG,CAACF,QAAQ,CAAC;IAC1C;IACQ,IAAIC,WAAW,EAAE;MACbD,QAAQ,CAAC,IAAI,CAACG,eAAe,EAAE,CAAC;IAC5C;EACA;EACIC,yBAAyBA,CAACC,OAAO,EAAE;IACvC;IACQ,IAAI,CAAC,IAAI,CAACZ,cAAc,EAAE;MACtB;IACZ;IACQH,oBAAoB,CAACgB,MAAM,CAACD,OAAO,CAAC;EAC5C;EACIX,sBAAsBA,CAAA,EAAG;IACrB,IAAI,CAACa,cAAc,EAAE;EAC7B;EACIA,cAAcA,CAAA,EAAG;IACb,MAAMC,YAAY,GAAG,IAAI,CAACL,eAAe,EAAE;IAC3Cb,oBAAoB,CAACmB,OAAO,CAACT,QAAQ,IAAI;MACrCA,QAAQ,CAACQ,YAAY,CAAC;IAClC,CAAS,CAAC;EACV;EACIL,eAAeA,CAAA,EAAG;IACd,IAAI,IAAIf,WAAW,CAACQ,SAAS,GAAG,IAAIC,QAAQ,CAACa,eAAe,KAAK,QAAQ,EAAE;MACvE,OAAO,SAAS;IAC5B;IACA;IACQ,OAAO,OAAO;EACtB;AACA;AACAzB,OAAO,CAACE,eAAe,GAAGA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}