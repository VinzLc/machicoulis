{"ast":null,"code":"'use strict';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.contentSha256MiddlewareFactory = void 0;\nconst aws_client_utils_1 = require(\"@aws-amplify/core/internals/aws-client-utils\");\nconst constants_1 = require(\"./constants\");\n/**\n * A middleware that adds the x-amz-content-sha256 header to the request if it is not already present.\n * It's required for S3 requests in browsers where the request body is sent in 1 chunk.\n * @see https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html\n *\n * @internal\n */\nconst contentSha256MiddlewareFactory = () => next => async function contentSha256Middleware(request) {\n  if (request.headers[constants_1.CONTENT_SHA256_HEADER]) {\n    return next(request);\n  } else {\n    const hash = await (0, aws_client_utils_1.getHashedPayload)(request.body);\n    request.headers[constants_1.CONTENT_SHA256_HEADER] = hash;\n    return next(request);\n  }\n};\nexports.contentSha256MiddlewareFactory = contentSha256MiddlewareFactory;","map":{"version":3,"names":["Object","defineProperty","exports","value","contentSha256MiddlewareFactory","aws_client_utils_1","require","constants_1","next","contentSha256Middleware","request","headers","CONTENT_SHA256_HEADER","hash","getHashedPayload","body"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\storage\\src\\providers\\s3\\utils\\client\\runtime\\contentSha256middleware.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentSha256MiddlewareFactory = void 0;\nconst aws_client_utils_1 = require(\"@aws-amplify/core/internals/aws-client-utils\");\nconst constants_1 = require(\"./constants\");\n/**\n * A middleware that adds the x-amz-content-sha256 header to the request if it is not already present.\n * It's required for S3 requests in browsers where the request body is sent in 1 chunk.\n * @see https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html\n *\n * @internal\n */\nconst contentSha256MiddlewareFactory = () => (next) => async function contentSha256Middleware(request) {\n    if (request.headers[constants_1.CONTENT_SHA256_HEADER]) {\n        return next(request);\n    }\n    else {\n        const hash = await (0, aws_client_utils_1.getHashedPayload)(request.body);\n        request.headers[constants_1.CONTENT_SHA256_HEADER] = hash;\n        return next(request);\n    }\n};\nexports.contentSha256MiddlewareFactory = contentSha256MiddlewareFactory;\n"],"mappings":";;AACA;AACA;AACAA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAI,CAAE,CAAC;AAC7DD,OAAO,CAACE,8BAA8B,GAAG,MAAM;AAC/C,MAAMC,kBAAkB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AAClF,MAAMC,WAAW,GAAGD,OAAO,CAAC,aAAa,CAAC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMF,8BAA8B,GAAGA,CAAA,KAAOI,IAAI,IAAK,eAAeC,uBAAuBA,CAACC,OAAO,EAAE;EACnG,IAAIA,OAAO,CAACC,OAAO,CAACJ,WAAW,CAACK,qBAAqB,CAAC,EAAE;IACpD,OAAOJ,IAAI,CAACE,OAAO,CAAC;EAC5B,OACS;IACD,MAAMG,IAAI,GAAG,MAAM,IAAIR,kBAAkB,CAACS,gBAAgB,EAAEJ,OAAO,CAACK,IAAI,CAAC;IACzEL,OAAO,CAACC,OAAO,CAACJ,WAAW,CAACK,qBAAqB,CAAC,GAAGC,IAAI;IACzD,OAAOL,IAAI,CAACE,OAAO,CAAC;EAC5B;AACA,CAAC;AACDR,OAAO,CAACE,8BAA8B,GAAGA,8BAA8B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}