{"ast":null,"code":"import { fromBase64 } from '@smithy/util-base64';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst deserializeContent = content => content.map(block => {\n  if (block.image) {\n    return deserializeImageBlock(block);\n  }\n  if (block.document) {\n    return deserializeDocumentBlock(block);\n  }\n  if (block.toolUse) {\n    return deserializeToolUseBlock(block);\n  }\n  if (block.toolResult) {\n    return deserializeToolResultBlock(block);\n  }\n  return removeNullsFromBlock(block);\n});\nconst deserializeImageBlock = ({\n  image\n}) => ({\n  image: {\n    ...image,\n    source: {\n      ...image.source,\n      bytes: fromBase64(image.source.bytes)\n    }\n  }\n});\nconst deserializeDocumentBlock = ({\n  document\n}) => ({\n  document: {\n    ...document,\n    source: {\n      ...document.source,\n      bytes: fromBase64(document.source.bytes)\n    }\n  }\n});\nconst deserializeJsonBlock = ({\n  json\n}) => ({\n  json: JSON.parse(json)\n});\nconst deserializeToolUseBlock = ({\n  toolUse\n}) => ({\n  toolUse: {\n    ...toolUse,\n    input: JSON.parse(toolUse.input)\n  }\n});\nconst deserializeToolResultBlock = ({\n  toolResult\n}) => ({\n  toolResult: {\n    toolUseId: toolResult.toolUseId,\n    content: toolResult.content.map(toolResultBlock => {\n      if (toolResultBlock.image) {\n        return deserializeImageBlock(toolResultBlock);\n      }\n      if (toolResultBlock.json) {\n        return deserializeJsonBlock(toolResultBlock);\n      }\n      return removeNullsFromBlock(toolResultBlock);\n    })\n  }\n});\nconst removeNullsFromBlock = block => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\nexport { deserializeContent };","map":{"version":3,"names":["deserializeContent","content","map","block","image","deserializeImageBlock","document","deserializeDocumentBlock","toolUse","deserializeToolUseBlock","toolResult","deserializeToolResultBlock","removeNullsFromBlock","source","bytes","fromBase64","deserializeJsonBlock","json","JSON","parse","input","toolUseId","toolResultBlock","Object","fromEntries","entries","filter","_","v"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\data-schema\\src\\runtime\\internals\\ai\\conversationMessageDeserializers.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fromBase64 } from '@smithy/util-base64';\nexport const deserializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return deserializeImageBlock(block);\n    }\n    if (block.document) {\n        return deserializeDocumentBlock(block);\n    }\n    if (block.toolUse) {\n        return deserializeToolUseBlock(block);\n    }\n    if (block.toolResult) {\n        return deserializeToolResultBlock(block);\n    }\n    return removeNullsFromBlock(block);\n});\nconst deserializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: fromBase64(image.source.bytes),\n        },\n    },\n});\nconst deserializeDocumentBlock = ({ document }) => ({\n    document: {\n        ...document,\n        source: {\n            ...document.source,\n            bytes: fromBase64(document.source.bytes),\n        },\n    },\n});\nconst deserializeJsonBlock = ({ json }) => ({\n    json: JSON.parse(json),\n});\nconst deserializeToolUseBlock = ({ toolUse }) => ({\n    toolUse: {\n        ...toolUse,\n        input: JSON.parse(toolUse.input),\n    },\n});\nconst deserializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        toolUseId: toolResult.toolUseId,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return deserializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return deserializeJsonBlock(toolResultBlock);\n            }\n            return removeNullsFromBlock(toolResultBlock);\n        }),\n    },\n});\nconst removeNullsFromBlock = (block) => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\n"],"mappings":";;AAAA;AACA;AAEY,MAACA,kBAAkB,GAAIC,OAAO,IAAKA,OAAO,CAACC,GAAG,CAAEC,KAAK,IAAK;EAClE,IAAIA,KAAK,CAACC,KAAK,EAAE;IACb,OAAOC,qBAAqB,CAACF,KAAK,CAAC;EAC3C;EACI,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAChB,OAAOC,wBAAwB,CAACJ,KAAK,CAAC;EAC9C;EACI,IAAIA,KAAK,CAACK,OAAO,EAAE;IACf,OAAOC,uBAAuB,CAACN,KAAK,CAAC;EAC7C;EACI,IAAIA,KAAK,CAACO,UAAU,EAAE;IAClB,OAAOC,0BAA0B,CAACR,KAAK,CAAC;EAChD;EACI,OAAOS,oBAAoB,CAACT,KAAK,CAAC;AACtC,CAAC;AACD,MAAME,qBAAqB,GAAGA,CAAC;EAAED;AAAK,CAAE,MAAM;EAC1CA,KAAK,EAAE;IACH,GAAGA,KAAK;IACRS,MAAM,EAAE;MACJ,GAAGT,KAAK,CAACS,MAAM;MACfC,KAAK,EAAEC,UAAU,CAACX,KAAK,CAACS,MAAM,CAACC,KAAK;IAChD;EACA;AACA,CAAC,CAAC;AACF,MAAMP,wBAAwB,GAAGA,CAAC;EAAED;AAAQ,CAAE,MAAM;EAChDA,QAAQ,EAAE;IACN,GAAGA,QAAQ;IACXO,MAAM,EAAE;MACJ,GAAGP,QAAQ,CAACO,MAAM;MAClBC,KAAK,EAAEC,UAAU,CAACT,QAAQ,CAACO,MAAM,CAACC,KAAK;IACnD;EACA;AACA,CAAC,CAAC;AACF,MAAME,oBAAoB,GAAGA,CAAC;EAAEC;AAAI,CAAE,MAAM;EACxCA,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACF,IAAI;AACzB,CAAC,CAAC;AACF,MAAMR,uBAAuB,GAAGA,CAAC;EAAED;AAAO,CAAE,MAAM;EAC9CA,OAAO,EAAE;IACL,GAAGA,OAAO;IACVY,KAAK,EAAEF,IAAI,CAACC,KAAK,CAACX,OAAO,CAACY,KAAK;EACvC;AACA,CAAC,CAAC;AACF,MAAMT,0BAA0B,GAAGA,CAAC;EAAED;AAAU,CAAG,MAAM;EACrDA,UAAU,EAAE;IACRW,SAAS,EAAEX,UAAU,CAACW,SAAS;IAC/BpB,OAAO,EAAES,UAAU,CAACT,OAAO,CAACC,GAAG,CAAEoB,eAAe,IAAK;MACjD,IAAIA,eAAe,CAAClB,KAAK,EAAE;QACvB,OAAOC,qBAAqB,CAACiB,eAAe,CAAC;MAC7D;MACY,IAAIA,eAAe,CAACL,IAAI,EAAE;QACtB,OAAOD,oBAAoB,CAACM,eAAe,CAAC;MAC5D;MACY,OAAOV,oBAAoB,CAACU,eAAe,CAAC;IACxD,CAAS;EACT;AACA,CAAC,CAAC;AACF,MAAMV,oBAAoB,GAAIT,KAAK,IAAKoB,MAAM,CAACC,WAAW,CAACD,MAAM,CAACE,OAAO,CAACtB,KAAK,CAAC,CAACuB,MAAM,CAAC,CAAC,CAACC,CAAC,EAAEC,CAAC,CAAC,KAAKA,CAAC,KAAK,IAAI,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}