{"ast":null,"code":"'use strict';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateStorageOperationInput = void 0;\nconst assertValidationError_1 = require(\"../../../errors/utils/assertValidationError\");\nconst validation_1 = require(\"../../../errors/types/validation\");\nconst isInputWithPath_1 = require(\"./isInputWithPath\");\nconst constants_1 = require(\"./constants\");\nconst resolveIdentityId_1 = require(\"./resolveIdentityId\");\nconst validateStorageOperationInput = (input, identityId) => {\n  (0, assertValidationError_1.assertValidationError)(\n  // Key present without a path\n  !!input.key && !input.path ||\n  // Path present without a key\n  !input.key && !!input.path, validation_1.StorageValidationErrorCode.InvalidStorageOperationInput);\n  if ((0, isInputWithPath_1.isInputWithPath)(input)) {\n    const {\n      path\n    } = input;\n    const objectKey = typeof path === 'string' ? path : path({\n      identityId: (0, resolveIdentityId_1.resolveIdentityId)(identityId)\n    });\n    (0, assertValidationError_1.assertValidationError)(!objectKey.startsWith('/'), validation_1.StorageValidationErrorCode.InvalidStoragePathInput);\n    return {\n      inputType: constants_1.STORAGE_INPUT_PATH,\n      objectKey\n    };\n  } else {\n    return {\n      inputType: constants_1.STORAGE_INPUT_KEY,\n      objectKey: input.key\n    };\n  }\n};\nexports.validateStorageOperationInput = validateStorageOperationInput;","map":{"version":3,"names":["Object","defineProperty","exports","value","validateStorageOperationInput","assertValidationError_1","require","validation_1","isInputWithPath_1","constants_1","resolveIdentityId_1","input","identityId","assertValidationError","key","path","StorageValidationErrorCode","InvalidStorageOperationInput","isInputWithPath","objectKey","resolveIdentityId","startsWith","InvalidStoragePathInput","inputType","STORAGE_INPUT_PATH","STORAGE_INPUT_KEY"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\storage\\src\\providers\\s3\\utils\\validateStorageOperationInput.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateStorageOperationInput = void 0;\nconst assertValidationError_1 = require(\"../../../errors/utils/assertValidationError\");\nconst validation_1 = require(\"../../../errors/types/validation\");\nconst isInputWithPath_1 = require(\"./isInputWithPath\");\nconst constants_1 = require(\"./constants\");\nconst resolveIdentityId_1 = require(\"./resolveIdentityId\");\nconst validateStorageOperationInput = (input, identityId) => {\n    (0, assertValidationError_1.assertValidationError)(\n    // Key present without a path\n    (!!input.key && !input.path) ||\n        // Path present without a key\n        (!input.key && !!input.path), validation_1.StorageValidationErrorCode.InvalidStorageOperationInput);\n    if ((0, isInputWithPath_1.isInputWithPath)(input)) {\n        const { path } = input;\n        const objectKey = typeof path === 'string'\n            ? path\n            : path({ identityId: (0, resolveIdentityId_1.resolveIdentityId)(identityId) });\n        (0, assertValidationError_1.assertValidationError)(!objectKey.startsWith('/'), validation_1.StorageValidationErrorCode.InvalidStoragePathInput);\n        return {\n            inputType: constants_1.STORAGE_INPUT_PATH,\n            objectKey,\n        };\n    }\n    else {\n        return { inputType: constants_1.STORAGE_INPUT_KEY, objectKey: input.key };\n    }\n};\nexports.validateStorageOperationInput = validateStorageOperationInput;\n"],"mappings":";;AACA;AACA;AACAA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAI,CAAE,CAAC;AAC7DD,OAAO,CAACE,6BAA6B,GAAG,MAAM;AAC9C,MAAMC,uBAAuB,GAAGC,OAAO,CAAC,6CAA6C,CAAC;AACtF,MAAMC,YAAY,GAAGD,OAAO,CAAC,kCAAkC,CAAC;AAChE,MAAME,iBAAiB,GAAGF,OAAO,CAAC,mBAAmB,CAAC;AACtD,MAAMG,WAAW,GAAGH,OAAO,CAAC,aAAa,CAAC;AAC1C,MAAMI,mBAAmB,GAAGJ,OAAO,CAAC,qBAAqB,CAAC;AAC1D,MAAMF,6BAA6B,GAAGA,CAACO,KAAK,EAAEC,UAAU,KAAK;EACzD,IAAIP,uBAAuB,CAACQ,qBAAqB;EACrD;EACK,CAAC,CAACF,KAAK,CAACG,GAAG,IAAI,CAACH,KAAK,CAACI,IAAI;EAC/B;EACS,CAACJ,KAAK,CAACG,GAAG,IAAI,CAAC,CAACH,KAAK,CAACI,IAAK,EAAER,YAAY,CAACS,0BAA0B,CAACC,4BAA4B,CAAC;EACvG,IAAI,IAAIT,iBAAiB,CAACU,eAAe,EAAEP,KAAK,CAAC,EAAE;IAC/C,MAAM;MAAEI;IAAI,CAAE,GAAGJ,KAAK;IACtB,MAAMQ,SAAS,GAAG,OAAOJ,IAAI,KAAK,WAC5BA,IAAA,GACAA,IAAI,CAAC;MAAEH,UAAU,EAAE,IAAIF,mBAAmB,CAACU,iBAAiB,EAAER,UAAU;IAAC,CAAE,CAAC;IAClF,IAAIP,uBAAuB,CAACQ,qBAAqB,EAAE,CAACM,SAAS,CAACE,UAAU,CAAC,GAAG,CAAC,EAAEd,YAAY,CAACS,0BAA0B,CAACM,uBAAuB,CAAC;IAC/I,OAAO;MACHC,SAAS,EAAEd,WAAW,CAACe,kBAAkB;MACzCL;IACZ,CAAS;EACT,OACS;IACD,OAAO;MAAEI,SAAS,EAAEd,WAAW,CAACgB,iBAAiB;MAAEN,SAAS,EAAER,KAAK,CAACG;IAAG,CAAE;EACjF;AACA,CAAC;AACDZ,OAAO,CAACE,6BAA6B,GAAGA,6BAA6B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}