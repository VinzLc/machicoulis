{"ast":null,"code":"'use strict';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateObjectUrl = validateObjectUrl;\nconst aws_client_utils_1 = require(\"@aws-amplify/core/internals/aws-client-utils\");\nconst IntegrityError_1 = require(\"../../../errors/IntegrityError\");\nfunction validateObjectUrl({\n  bucketName,\n  key,\n  objectURL\n}) {\n  if (!bucketName || !key || !objectURL) {\n    throw new IntegrityError_1.IntegrityError();\n  }\n  const bucketWithDots = bucketName.includes('.');\n  const encodedBucketName = (0, aws_client_utils_1.extendedEncodeURIComponent)(bucketName);\n  const encodedKey = key.split('/').map(aws_client_utils_1.extendedEncodeURIComponent).join('/');\n  const isPathStyleUrl = objectURL.pathname === `/${encodedBucketName}/${encodedKey}`;\n  const isSubdomainUrl = objectURL.hostname.startsWith(`${encodedBucketName}.`) && objectURL.pathname === `/${encodedKey}`;\n  if (!(isPathStyleUrl || !bucketWithDots && isSubdomainUrl)) {\n    throw new IntegrityError_1.IntegrityError();\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","validateObjectUrl","aws_client_utils_1","require","IntegrityError_1","bucketName","key","objectURL","IntegrityError","bucketWithDots","includes","encodedBucketName","extendedEncodeURIComponent","encodedKey","split","map","join","isPathStyleUrl","pathname","isSubdomainUrl","hostname","startsWith"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\storage\\src\\providers\\s3\\utils\\validateObjectUrl.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateObjectUrl = validateObjectUrl;\nconst aws_client_utils_1 = require(\"@aws-amplify/core/internals/aws-client-utils\");\nconst IntegrityError_1 = require(\"../../../errors/IntegrityError\");\nfunction validateObjectUrl({ bucketName, key, objectURL, }) {\n    if (!bucketName || !key || !objectURL) {\n        throw new IntegrityError_1.IntegrityError();\n    }\n    const bucketWithDots = bucketName.includes('.');\n    const encodedBucketName = (0, aws_client_utils_1.extendedEncodeURIComponent)(bucketName);\n    const encodedKey = key.split('/').map(aws_client_utils_1.extendedEncodeURIComponent).join('/');\n    const isPathStyleUrl = objectURL.pathname === `/${encodedBucketName}/${encodedKey}`;\n    const isSubdomainUrl = objectURL.hostname.startsWith(`${encodedBucketName}.`) &&\n        objectURL.pathname === `/${encodedKey}`;\n    if (!(isPathStyleUrl || (!bucketWithDots && isSubdomainUrl))) {\n        throw new IntegrityError_1.IntegrityError();\n    }\n}\n"],"mappings":";;AACA;AACA;AACAA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAI,CAAE,CAAC;AAC7DD,OAAO,CAACE,iBAAiB,GAAGA,iBAAiB;AAC7C,MAAMC,kBAAkB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AAClF,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAClE,SAASF,iBAAiBA,CAAC;EAAEI,UAAU;EAAEC,GAAG;EAAEC;AAAS,CAAG,EAAE;EACxD,IAAI,CAACF,UAAU,IAAI,CAACC,GAAG,IAAI,CAACC,SAAS,EAAE;IACnC,MAAM,IAAIH,gBAAgB,CAACI,cAAc,EAAE;EACnD;EACI,MAAMC,cAAc,GAAGJ,UAAU,CAACK,QAAQ,CAAC,GAAG,CAAC;EAC/C,MAAMC,iBAAiB,GAAG,IAAIT,kBAAkB,CAACU,0BAA0B,EAAEP,UAAU,CAAC;EACxF,MAAMQ,UAAU,GAAGP,GAAG,CAACQ,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACb,kBAAkB,CAACU,0BAA0B,CAAC,CAACI,IAAI,CAAC,GAAG,CAAC;EAC9F,MAAMC,cAAc,GAAGV,SAAS,CAACW,QAAQ,KAAK,IAAIP,iBAAiB,IAAIE,UAAU,EAAE;EACnF,MAAMM,cAAc,GAAGZ,SAAS,CAACa,QAAQ,CAACC,UAAU,CAAC,GAAGV,iBAAiB,GAAG,CAAC,IACzEJ,SAAS,CAACW,QAAQ,KAAK,IAAIL,UAAU,EAAE;EAC3C,IAAI,EAAEI,cAAc,IAAK,CAACR,cAAc,IAAIU,cAAe,CAAC,EAAE;IAC1D,MAAM,IAAIf,gBAAgB,CAACI,cAAc,EAAE;EACnD;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}