{"ast":null,"code":"import React__default from 'react';\nimport { isFunction } from '@aws-amplify/ui';\nimport { useStableId } from '../../primitives/utils/useStableId.mjs';\n\n// `FileSelect` input `type` must always be set to `file`\nconst INPUT_TYPE = 'file';\nconst TEST_ID = 'amplify-file-select';\nconst DEFAULT_PROPS = {\n  style: {\n    display: 'none'\n  },\n  type: 'file',\n  'data-testid': TEST_ID\n};\n/**\n * @internal @unstable\n */\nconst FileSelect = React__default.forwardRef(function FileSelect({\n  multiple = true,\n  type = 'FILE',\n  testId = 'amplify-file-select',\n  ...props\n}, ref) {\n  return React__default.createElement(\"input\", {\n    ...DEFAULT_PROPS,\n    ...props,\n    ...(type === 'FOLDER' ? {\n      webkitdirectory: ''\n    } : undefined),\n    \"data-testid\": testId,\n    multiple: multiple,\n    ref: ref,\n    type: INPUT_TYPE\n  });\n});\n/**\n * @internal @unstable\n *\n * @usage\n * ```tsx\n *  function MyUploadButton() {\n *    const [files, setFiles] = React.useState<File[]>([]);\n *    const [fileSelect, handleFileSelect] = useFileSelect(setFiles);\n *    return (\n *      <>\n *        {fileSelect}\n *        <Button\n *          onClick={() => {\n *            handleFileSelect('file');\n *          }}\n *        />\n *      </>\n *    );\n *  }\n * ```\n */\nconst useFileSelect = onSelect => {\n  const [inputProps, setInputProps] = React__default.useState(undefined);\n  const id = useStableId();\n  const ref = React__default.useRef(null);\n  React__default.useEffect(() => {\n    if (inputProps) {\n      ref.current?.click();\n    }\n  }, [id, inputProps]);\n  const handleFileSelect = React__default.useCallback((type, options) => {\n    if (id !== ref.current?.id) return;\n    setInputProps({\n      type,\n      ...options\n    });\n  }, [id]);\n  const fileSelect = React__default.createElement(FileSelect, {\n    ...inputProps,\n    id: id,\n    onChange: event => {\n      if (isFunction(inputProps?.onChange)) inputProps?.onChange(event);\n      if (isFunction(onSelect) && !!event.target.files?.length) {\n        onSelect?.([...event.target.files]);\n      }\n      // Reset the input value to allow re-selecting the same file\n      if (ref.current) {\n        ref.current.value = '';\n      }\n      // clean up\n      setInputProps(undefined);\n    },\n    ref: ref\n  });\n  return [fileSelect, handleFileSelect];\n};\nexport { DEFAULT_PROPS, FileSelect, useFileSelect };","map":{"version":3,"names":["React__default","isFunction","useStableId","INPUT_TYPE","TEST_ID","DEFAULT_PROPS","style","display","type","FileSelect","forwardRef","multiple","testId","props","ref","createElement","webkitdirectory","undefined","useFileSelect","onSelect","inputProps","setInputProps","useState","id","useRef","useEffect","current","click","handleFileSelect","useCallback","options","fileSelect","onChange","event","target","files","length","value"],"sources":["C:/Users/vinzl/workspace/machicoulis/daily-image-collector/node_modules/@aws-amplify/ui-react/dist/esm/components/FileSelect/FileSelect.mjs"],"sourcesContent":["import React__default from 'react';\nimport { isFunction } from '@aws-amplify/ui';\nimport { useStableId } from '../../primitives/utils/useStableId.mjs';\n\n// `FileSelect` input `type` must always be set to `file`\nconst INPUT_TYPE = 'file';\nconst TEST_ID = 'amplify-file-select';\nconst DEFAULT_PROPS = {\n    style: { display: 'none' },\n    type: 'file',\n    'data-testid': TEST_ID,\n};\n/**\n * @internal @unstable\n */\nconst FileSelect = React__default.forwardRef(function FileSelect({ multiple = true, type = 'FILE', testId = 'amplify-file-select', ...props }, ref) {\n    return (React__default.createElement(\"input\", { ...DEFAULT_PROPS, ...props, ...(type === 'FOLDER' ? { webkitdirectory: '' } : undefined), \"data-testid\": testId, multiple: multiple, ref: ref, type: INPUT_TYPE }));\n});\n/**\n * @internal @unstable\n *\n * @usage\n * ```tsx\n *  function MyUploadButton() {\n *    const [files, setFiles] = React.useState<File[]>([]);\n *    const [fileSelect, handleFileSelect] = useFileSelect(setFiles);\n *    return (\n *      <>\n *        {fileSelect}\n *        <Button\n *          onClick={() => {\n *            handleFileSelect('file');\n *          }}\n *        />\n *      </>\n *    );\n *  }\n * ```\n */\nconst useFileSelect = (onSelect) => {\n    const [inputProps, setInputProps] = React__default.useState(undefined);\n    const id = useStableId();\n    const ref = React__default.useRef(null);\n    React__default.useEffect(() => {\n        if (inputProps) {\n            ref.current?.click();\n        }\n    }, [id, inputProps]);\n    const handleFileSelect = React__default.useCallback((type, options) => {\n        if (id !== ref.current?.id)\n            return;\n        setInputProps({ type, ...options });\n    }, [id]);\n    const fileSelect = (React__default.createElement(FileSelect, { ...inputProps, id: id, onChange: (event) => {\n            if (isFunction(inputProps?.onChange))\n                inputProps?.onChange(event);\n            if (isFunction(onSelect) && !!event.target.files?.length) {\n                onSelect?.([...event.target.files]);\n            }\n            // Reset the input value to allow re-selecting the same file\n            if (ref.current) {\n                ref.current.value = '';\n            }\n            // clean up\n            setInputProps(undefined);\n        }, ref: ref }));\n    return [fileSelect, handleFileSelect];\n};\n\nexport { DEFAULT_PROPS, FileSelect, useFileSelect };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}