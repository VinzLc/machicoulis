{"ast":null,"code":"'use strict';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConcurrentUploadsProgressTracker = void 0;\n/**\n * Track the progress from multiple concurrent uploads, and invoke the onProgress callback.\n *\n * @internal\n */\nconst getConcurrentUploadsProgressTracker = ({\n  size,\n  onProgress\n}) => {\n  const transferredBytesPerListener = [];\n  const getTransferredBytes = () => transferredBytesPerListener.reduce((acc, transferredBytes) => acc + transferredBytes, 0);\n  return {\n    getOnProgressListener: () => {\n      transferredBytesPerListener.push(0);\n      const listenerIndex = transferredBytesPerListener.length - 1;\n      return event => {\n        const {\n          transferredBytes\n        } = event;\n        transferredBytesPerListener[listenerIndex] = transferredBytes;\n        onProgress?.({\n          transferredBytes: getTransferredBytes(),\n          totalBytes: size\n        });\n      };\n    }\n  };\n};\nexports.getConcurrentUploadsProgressTracker = getConcurrentUploadsProgressTracker;","map":{"version":3,"names":["Object","defineProperty","exports","value","getConcurrentUploadsProgressTracker","size","onProgress","transferredBytesPerListener","getTransferredBytes","reduce","acc","transferredBytes","getOnProgressListener","push","listenerIndex","length","event","totalBytes"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\storage\\src\\providers\\s3\\apis\\internal\\uploadData\\multipart\\progressTracker.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConcurrentUploadsProgressTracker = void 0;\n/**\n * Track the progress from multiple concurrent uploads, and invoke the onProgress callback.\n *\n * @internal\n */\nconst getConcurrentUploadsProgressTracker = ({ size, onProgress, }) => {\n    const transferredBytesPerListener = [];\n    const getTransferredBytes = () => transferredBytesPerListener.reduce((acc, transferredBytes) => acc + transferredBytes, 0);\n    return {\n        getOnProgressListener: () => {\n            transferredBytesPerListener.push(0);\n            const listenerIndex = transferredBytesPerListener.length - 1;\n            return (event) => {\n                const { transferredBytes } = event;\n                transferredBytesPerListener[listenerIndex] = transferredBytes;\n                onProgress?.({\n                    transferredBytes: getTransferredBytes(),\n                    totalBytes: size,\n                });\n            };\n        },\n    };\n};\nexports.getConcurrentUploadsProgressTracker = getConcurrentUploadsProgressTracker;\n"],"mappings":";;AACA;AACA;AACAA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAI,CAAE,CAAC;AAC7DD,OAAO,CAACE,mCAAmC,GAAG,MAAM;AACpD;AACA;AACA;AACA;AACA;AACA,MAAMA,mCAAmC,GAAGA,CAAC;EAAEC,IAAI;EAAEC;AAAU,CAAG,KAAK;EACnE,MAAMC,2BAA2B,GAAG,EAAE;EACtC,MAAMC,mBAAmB,GAAGA,CAAA,KAAMD,2BAA2B,CAACE,MAAM,CAAC,CAACC,GAAG,EAAEC,gBAAgB,KAAKD,GAAG,GAAGC,gBAAgB,EAAE,CAAC,CAAC;EAC1H,OAAO;IACHC,qBAAqB,EAAEA,CAAA,KAAM;MACzBL,2BAA2B,CAACM,IAAI,CAAC,CAAC,CAAC;MACnC,MAAMC,aAAa,GAAGP,2BAA2B,CAACQ,MAAM,GAAG,CAAC;MAC5D,OAAQC,KAAK,IAAK;QACd,MAAM;UAAEL;QAAgB,CAAE,GAAGK,KAAK;QAClCT,2BAA2B,CAACO,aAAa,CAAC,GAAGH,gBAAgB;QAC7DL,UAAU,GAAG;UACTK,gBAAgB,EAAEH,mBAAmB,EAAE;UACvCS,UAAU,EAAEZ;QAChC,CAAiB,CAAC;MAClB,CAAa;IACb;EACA,CAAK;AACL,CAAC;AACDH,OAAO,CAACE,mCAAmC,GAAGA,mCAAmC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}