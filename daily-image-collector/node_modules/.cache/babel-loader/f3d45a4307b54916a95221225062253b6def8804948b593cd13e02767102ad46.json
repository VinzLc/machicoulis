{"ast":null,"code":"import _objectSpread from \"C:/Users/vinzl/workspace/machicoulis/daily-image-collector/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\nimport { handleListGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\nfunction listFactory(client, modelIntrospection, model, getInternals) {\n  let context = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  let customUserAgentDetails = arguments.length > 5 ? arguments[5] : undefined;\n  const listWithContext = (contextSpec, args) => {\n    return _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails);\n  };\n  const list = args => {\n    return _list(client, modelIntrospection, model, getInternals, args, undefined, customUserAgentDetails);\n  };\n  return context ? listWithContext : list;\n}\nfunction _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails) {\n  return selfAwareAsync(async resultPromise => {\n    const {\n      name\n    } = model;\n    const query = generateGraphQLDocument(modelIntrospection, model, 'LIST', args);\n    const variables = buildGraphQLVariables(model, 'LIST', args, modelIntrospection);\n    const auth = authModeParams(client, getInternals, args);\n    const headers = getCustomHeaders(client, getInternals, args === null || args === void 0 ? void 0 : args.headers);\n    const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n    try {\n      const basePromise = contextSpec ? client.graphql(contextSpec, _objectSpread(_objectSpread({}, auth), {}, {\n        query,\n        variables\n      }), headers) : client.graphql(_objectSpread(_objectSpread({}, auth), {}, {\n        query,\n        variables\n      }, userAgentOverride), headers);\n      const extendedPromise = extendCancellability(basePromise, resultPromise);\n      const {\n        data,\n        extensions\n      } = await extendedPromise;\n      // flatten response\n      if (data !== undefined) {\n        const [key] = Object.keys(data);\n        if (data[key].items) {\n          const flattenedResult = data[key].items.map(value => flattenItems(modelIntrospection, name, value));\n          // don't init if custom selection set\n          if (args !== null && args !== void 0 && args.selectionSet) {\n            return {\n              data: flattenedResult,\n              nextToken: data[key].nextToken,\n              extensions\n            };\n          } else {\n            const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n            return {\n              data: initialized,\n              nextToken: data[key].nextToken,\n              extensions\n            };\n          }\n        }\n        return {\n          data: data[key],\n          nextToken: data[key].nextToken,\n          extensions\n        };\n      }\n    } catch (error) {\n      /**\n       * The `data` type returned by `error` here could be:\n       * 1) `null`\n       * 2) an empty object\n       * 3) \"populated\" but with a `null` value `data: { listPosts: null }`\n       * 4) actual records `data: { listPosts: items: [{ id: '1', ...etc }] }`\n       */\n      const {\n        data,\n        errors\n      } = error;\n      // `data` is not `null`, and is not an empty object:\n      if (data !== undefined && data !== null && Object.keys(data).length !== 0 && errors) {\n        var _data$key;\n        const [key] = Object.keys(data);\n        if ((_data$key = data[key]) !== null && _data$key !== void 0 && _data$key.items) {\n          var _data$key4;\n          const flattenedResult = data[key].items.map(value => flattenItems(modelIntrospection, name, value));\n          /**\n           * Check exists since `flattenedResult` could be `null`.\n           * if `flattenedResult` exists, result is an actual record.\n           */\n          if (flattenedResult) {\n            // don't init if custom selection set\n            if (args !== null && args !== void 0 && args.selectionSet) {\n              var _data$key2;\n              return {\n                data: flattenedResult,\n                nextToken: (_data$key2 = data[key]) === null || _data$key2 === void 0 ? void 0 : _data$key2.nextToken,\n                errors\n              };\n            } else {\n              var _data$key3;\n              const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n              // data is full record w/out selection set:\n              return {\n                data: initialized,\n                nextToken: (_data$key3 = data[key]) === null || _data$key3 === void 0 ? void 0 : _data$key3.nextToken,\n                errors\n              };\n            }\n          }\n          return {\n            data: data[key],\n            nextToken: (_data$key4 = data[key]) === null || _data$key4 === void 0 ? void 0 : _data$key4.nextToken,\n            errors\n          };\n        } else {\n          // response is of type `data: { getPost: null }`)\n          return handleListGraphQlError(error);\n        }\n      } else {\n        // `data` is `null` or an empty object:\n        return handleListGraphQlError(error);\n      }\n    }\n  });\n}\nexport { listFactory };","map":{"version":3,"names":["listFactory","client","modelIntrospection","model","getInternals","context","arguments","length","undefined","customUserAgentDetails","listWithContext","contextSpec","args","_list","list","selfAwareAsync","resultPromise","name","query","generateGraphQLDocument","variables","buildGraphQLVariables","auth","authModeParams","headers","getCustomHeaders","userAgentOverride","createUserAgentOverride","basePromise","graphql","_objectSpread","extendedPromise","extendCancellability","data","extensions","key","Object","keys","items","flattenedResult","map","value","flattenItems","selectionSet","nextToken","initialized","initializeModel","authMode","authToken","error","errors","_data$key","_data$key4","_data$key2","_data$key3","handleListGraphQlError"],"sources":["C:\\Users\\vinzl\\workspace\\machicoulis\\daily-image-collector\\node_modules\\@aws-amplify\\data-schema\\src\\runtime\\internals\\operations\\list.ts"],"sourcesContent":["import { authModeParams, buildGraphQLVariables, flattenItems, generateGraphQLDocument, getCustomHeaders, initializeModel, } from '../APIClient';\nimport { handleListGraphQlError } from './utils';\nimport { selfAwareAsync } from '../../utils';\nimport { extendCancellability } from '../cancellation';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails';\nexport function listFactory(client, modelIntrospection, model, getInternals, context = false, customUserAgentDetails) {\n    const listWithContext = (contextSpec, args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails);\n    };\n    const list = (args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, undefined, customUserAgentDetails);\n    };\n    return context ? listWithContext : list;\n}\nfunction _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, 'LIST', args);\n        const variables = buildGraphQLVariables(model, 'LIST', args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = contextSpec\n                ? client.graphql(contextSpec, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data !== undefined) {\n                const [key] = Object.keys(data);\n                if (data[key].items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    // don't init if custom selection set\n                    if (args?.selectionSet) {\n                        return {\n                            data: flattenedResult,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                    else {\n                        const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                        return {\n                            data: initialized,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                }\n                return {\n                    data: data[key],\n                    nextToken: data[key].nextToken,\n                    extensions,\n                };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `data: { listPosts: null }`\n             * 4) actual records `data: { listPosts: items: [{ id: '1', ...etc }] }`\n             */\n            const { data, errors } = error;\n            // `data` is not `null`, and is not an empty object:\n            if (data !== undefined &&\n                data !== null &&\n                Object.keys(data).length !== 0 &&\n                errors) {\n                const [key] = Object.keys(data);\n                if (data[key]?.items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    /**\n                     * Check exists since `flattenedResult` could be `null`.\n                     * if `flattenedResult` exists, result is an actual record.\n                     */\n                    if (flattenedResult) {\n                        // don't init if custom selection set\n                        if (args?.selectionSet) {\n                            return {\n                                data: flattenedResult,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                        else {\n                            const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                            // data is full record w/out selection set:\n                            return {\n                                data: initialized,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                    }\n                    return {\n                        data: data[key],\n                        nextToken: data[key]?.nextToken,\n                        errors,\n                    };\n                }\n                else {\n                    // response is of type `data: { getPost: null }`)\n                    return handleListGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null` or an empty object:\n                return handleListGraphQlError(error);\n            }\n        }\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}